# Техническое задание
## Разработка мобильного приложения "Трекер расходов"
## Список фич

- Авторизация
- Регистрация
- Восстановление пароля
- Добавление категорий расходов
- Внесение информации о расходах по категориям
- Просмотр аналитики расходов по категориям (день/неделя/месяц)
- История расходов*
- Настройки (выбор темы приложения, экспорт расходов в csv, выход из аккаунта)*
- Запоминание входа в приложение* (+ 2 балла)
- Ежедневные напоминания о заполнении расходов* (+ 4 балла)

## Общие требования

1. Стек
   - UI: Xml + MVVM или Compose + MVI
   - DI: Koin или Dagger* (+3 балла)
   - Database: Room или SQLite* (+4 балла)
   - minSdk = 21
2. Все операции с деньгами совершать через BigDecimal
3. Все денежные поля хранить в базе в копейках
4. Настроить релизную сборку и подписать приложение* (+ 4 балла)
5. Поддержка светлой/темной темы
   - Через дневные и ночные ресурсы colors
   - Или через attrs + theme* (+ 2 балла)
6. Добавить и настроить detekt* (+ 2 балла)
   - Классы до 300 строк
   - Методы до 35 строк
   - В методах до 5 аргументов
7. Поддержка landscape ориентации* (+ 2 балла)
8. Разделение кода по фичам + слоистая архитектура
9. Git flow: master, develop, 1-feature-branch. Создаем доску, декомпозируем проект на задачи. В задачах создаем фича ветки от develop.
Для сдачи работы необходимо ответвиться от develop release-номер_версии, в релизной ветке увелить номер версии приложения, сделать merge request в master и скинуть ссылку на пр
10. Без Runtime Exception (+ 3 балла)
11. Баги
    - Менее 8 (+ 1 балл)
    - Менее 5 (+ 2 балла)
    - Менее 3 (+ 3 балла)
    - Без багов (+ 5 баллов)

## Экран регистрации (0/1/2)
### Наполнение
- Поля ввода: email, пароль, еще раз пароль
- Кнопка "Зарегистрироваться"
- Верхний toolbar с иконкой "назад" (возвращает на экран авторизации)

### Особенности экрана
1. Проверка что пароль длиннее 6 символов (0.25)
2. Проверка что пароли в полях ввода одинаковые (0.25)
3. Валидация email на корректность ввода (0.25)
4. Кнопка "Зарегистрироваться" не активна пока все поля не прошли проверку (0.25)
5. Писать ошибки под полями в процессе ввода (0.5)
6. При нажатии на кнопку "Зарегистрироваться" производить регистрацию в firebase или моковое API (1)

## Экран авторизации (0/1/2)
### Наполнение
- Поля ввода: email, пароль
- Кнопки: "Войти", "Зарегистрироваться", "Восстановить пароль"

### Особенности экрана
1. Проверка что пароль длиннее 6 символов (0.25)
2. Валидация email на корректность ввода (0.25)
3. Конпка "Войти" не активна пока все поля не прошли проверку (0.5)
4. Писать ошибки под полями в процессе ввода (0.5)
5. При нажатии на кнопку "Зарегистрироваться" направить пользователя на экран регистрации (0.25)
6. При нажатии на кнопку "Восстановить пароль" направить пользователя на экран восстановления пароля (0.25)
7. При нажатии на кнопку "Войти" произвести авторизацию через firebase или моковое API (1)

## Экран восстановления пароля (0/1/2)
### Наполнение
- Поле ввода: email
- Кнопка "Отправить письмо для восстановления пароля"
- Верхний toolbar с иконкой "назад" (возвращает на экран авторизации)
### Особенности экрана
1. Валидация email на корректность ввода (0.5)
2. Кнопка "Отправить письмо для восстановления пароля" не активна пока поле не прошло проверку (0.5)
3. Писать ошибку под полем в процессе ввода (0.5)
4. При нажатии на кнопку "Отправить письмо для восстановления пароля" производить восстановление пароля через firebase или моковое API (1)

## Главный экран (Добавление расходов) (0/2/4)
### Наполнение
- Поля ввода: Категория, сумма, примечание(необязательно для заполнения)
- Поле "Дата расхода"
- Кнопки "Добавить", "Выбрать дату"
- Возможность перейти к другому функционалу приложения (Просмотр аналитики, настройки, история)

### Осбенности экрана
1. Валидация поля суммы (нельзя ввести меньше 0.01 или больше 999 999 999 999 999) (0.5)
2. Нельзя добавить расход без категории или суммы (0.5)
3. По умолчанию дата заполнена текущим днем (0.25)
4. При нажатии на кнопку "Выбрать дату" показывать стандартный диалог выбора даты (0.25)
5. При вводе в поле "категория" под полем появляются подсказки с уже добавленными категориями, с возможностью по нажатию на подсказку подставить в поле ввода категорию (0/3/5)
6. При нажатии на кнопку "Добавить" сохранять расход в базе данных (1)
7. Добавление категории в список сущестующих категорий: на отдельном экране, либо автоматически при добавлении расхода с новой категорией

## Экран аналитики расходов (0/4/6)
### Наполнение
- Круговая диаграмма по категориям (до 8 делений, 8 деление - остальные) (0/3/5)
- Список категорий (название, сумма, процент от суммы по всем категориям за выбранный период) (0/2/3)
- Выбор периода (день/неделя/месяц/год)  (0/1/2)
### Особенности экрана
1. Возможность сортировка списка* (+ 2 балла)
2. Самописное решение по отрисовке круговой диаграммы (+5 баллов)

## Экран истории расходов (0/3/5)
### Наполнение
- Список с расходами (дата, категория, сумма, примечание)
### Особенности экрана
1. Возможность фильтра по категории (0/1/3)
2. Возможность фильтра по дате (0/1/3)
3. Возможность изменить или удалить запись о расходе* (для изменения доступны все поля записи: дата, сумма, категория, примечание) (0/4/6)
   - Возможно вынесение этой функциональности на другой экран или можно изменять записи на экране истории расходов (на усмотрение команды дизайнеров)
4. Добавление валидаций как на главном экране на изменение записей* (0/1/2)

## Экран настроек (0/3/5)
### Наполнение
- Switch смена темы приложения
- Switch включения/выключения напоминаний* (если реализована фича ежедневных напоминаний) + выбор времени (+ 2 балла)
- Кнопки: "Экспорт расходов в csv", "Выход из аккаунта"

### Особенности экрана
1. При нажатии на кнопку "Экспорт расходов в csv" выгружать все данные о расходах в csv файл и сохранять на устройстве с toast сообщением пути (дата;категория;сумма)
имя файла - дата_расходы (0/3/5)
2. При нажатии на кнопку "Выход из аккаунта", удалять данные для автоматического входа и направить пользователя на экран авторизации (1)

## Моковое API
## Регистрация POST /registration

| Поле     | Тип    | Описание       |
|----------|--------|----------------|
| email    | String | Почтовый адрес |
| password | String | Пароль         |

Тело запроса

```json
{
   "email": "test@gmail.com",
   "password": "1234567"
}
```

| Поле          | Тип    | Описание                                 |
|---------------|--------|------------------------------------------|
| access_token  | String | Токен для доступа к запросам             |
| refresh_token | String | Токен для запроса обновления accessToken |
| user_id       | Long   | Уникальный идентификатор пользователя    |

Тело при успешном ответе

```json
{
   "access_token": "qbAwrHtAbV1Ec9UA4xbFRzH7SiYIlHekPU3wRbJEAyxak4lk1",
   "refresh_token": "k77V6bTYlAiXNRejTbEkyKfvPeQoyL75ifOpfb5vG4AHSA8Yl",
   "user_id": 1
}
```

Возможные коды ответов:

- 201 Created
- 409 Пользователь уже существует
- 400 Некорректный email
- 400 Пароль менее 7 символов

## Авторизация POST /auth

| Поле     | Тип    | Описание       |
|----------|--------|----------------|
| email    | String | Почтовый адрес |
| password | String | Пароль         |

Тело запроса

```json
{
   "email": "test@gmail.com",
   "password": "1234567"
}
```

| Поле          | Тип    | Описание                                 |
|---------------|--------|------------------------------------------|
| access_token  | String | Токен для доступа к запросам             |
| refresh_token | String | Токен для запроса обновления accessToken |
| user_id       | Long   | Уникальный идентификатор пользователя    |

Тело при успешном ответе

```json
{
   "access_token": "qbAwrHtAbV1Ec9UA4xbFRzH7SiYIlHekPU3wRbJEAyxak4lk1",
   "refresh_token": "k77V6bTYlAiXNRejTbEkyKfvPeQoyL75ifOpfb5vG4AHSA8Yl",
   "user_id": 1
}
```

Возможные коды ответов:

- 200 OK
- 400 Некорректный email
- 400 Пароль менее 7 символов

## Обновление токена POST /refresh

| Поле          | Тип    | Описание                                 |
|---------------|--------|------------------------------------------|
| user_id       | Long   | Уникальный идентификатор пользователя    |
| refresh_token | String | Токен для запроса обновления accessToken |

Тело запроса

```json
{
   "user_id": "test@gmail.com",
   "refresh_token": "k77V6bTYlAiXNRejTbEkyKfvPeQoyL75ifOpfb5vG4AHSA8Yl"
}
```
Тело при успешном ответе

| Поле          | Тип    | Описание                                 |
|---------------|--------|------------------------------------------|
| access_token  | String | Токен для доступа к запросам             |
| refresh_token | String | Токен для запроса обновления accessToken |

```json
{
   "access_token": "qbAwrHtAbV1Ec9UA4xbFRzH7SiYIlHekPU3wRbJEAyxak4lk1",
   "refresh_token": "k77V6bTYlAiXNRejTbEkyKfvPeQoyL75ifOpfb5vG4AHSA8Yl"
}
```
## Восстановление пароля POST /recovery
Header: "email"

Возможные коды ответов:
- 200 OK
- 400 Некорректный email
